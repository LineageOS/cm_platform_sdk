{
  "comments": [
    {
      "key": {
        "uuid": "bf659307_fe1d990f",
        "filename": "cm/lib/main/java/org/cyanogenmod/platform/internal/PartnerInterfaceService.java",
        "patchSetId": 2
      },
      "lineNbr": 243,
      "author": {
        "id": 9621
      },
      "writtenOn": "2015-12-18T07:36:17Z",
      "side": 1,
      "message": "typo in this log. Interal -\u003e Internal",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_5ebb65e4",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 9621
      },
      "writtenOn": "2015-12-18T07:36:17Z",
      "side": 1,
      "message": "I\u0027m also curious, are these just helpers or does the internal zen mode system only support these defined time durations? Is it possible to specify some intermediate time with a different millisecond argument?",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_fecb596f",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 14451
      },
      "writtenOn": "2015-12-18T07:57:49Z",
      "side": 1,
      "message": "There is no software restriction in the internal zen mode system that I can see. NotificationManager.setZenModeCondition uses \"condition://android/countdown/1450208481691\", which just specifies the end time in milliseconds. However the system UI does limit users. When you press the + or - buttons, it will only allow you to go to the above durations. \n\nTo make this API extensible in case of future UI changes,  I would say use milliseconds. \nTo make this API mimic the UI,  I would say use an enum to limit users to only the above duration values. \n\nWhat\u0027s the best use case?",
      "parentUuid": "bf659307_5ebb65e4",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_9e9d7d68",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 10394
      },
      "writtenOn": "2015-12-18T08:01:45Z",
      "side": 1,
      "message": "don\u0027t worry about the ui limits - I\u0027d just keep it to milliseconds and let the apps choose how they want to do it\n\nI guess the only real question is if the plugin uses an arbitray value like 3 min 10 s, does systemui show it correctly or do bad things happen?",
      "parentUuid": "bf659307_fecb596f",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_1e83ad06",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 9621
      },
      "writtenOn": "2015-12-18T08:02:27Z",
      "side": 1,
      "message": "In my opinion, we want to make this API as flexible as the backend will allow. So, it should accept milliseconds as you have done. It seems like the System UI restriction was just a UX decision to limit the user to those specific durations.\n\nSo, I guess my question is do we need these constants at all then if we\u0027ll allow any value? If the answer is no, let\u0027s remove them.",
      "parentUuid": "bf659307_fecb596f",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_fe9ef952",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 14451
      },
      "writtenOn": "2015-12-18T08:26:56Z",
      "side": 1,
      "message": "Those constants are the time intervals which the Google system UI will behave well. That system UI will be glitchy if you use any other durations... It sounds like we do need to support people setting this and relying on the Google UI? In this case let me finish up those test cases. And see exactly what we got here.",
      "parentUuid": "bf659307_1e83ad06",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_dea1b597",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 14451
      },
      "writtenOn": "2015-12-18T08:26:56Z",
      "side": 1,
      "message": "Hmm.. okay. The UI does not behave completely well... \nIs the use case that someone is calling  PartnerInterface and relying on the Google UI? In that case I need to re-evaluate. \n\nThe UI does not support all the durations. \n1. If duration \u003c12 hours. It will show the \"until XX\" end time correctly. But the duration will only be one of its supported durations. \ne.g. if you set 1 hour 2 minutes setting at 5:10pm, it will show \"1 hour (until 5:12pm)\"\n\n2. If the duration \u003e 12 hours. UI shows \"indefinitely\" and when you tap on it it will revert back to the previous duration. But if leaving it without tapping, the actual duration you set seems to actually be honored. I am not sure yet 100%. Need to implement that test case \u0026 try it over a long enough duration...",
      "parentUuid": "bf659307_9e9d7d68",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_bea88177",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 9621
      },
      "writtenOn": "2015-12-18T08:36:09Z",
      "side": 1,
      "message": "Gotcha. Sounds like we have to decide if we will change the UI on our platform to be more flexible. It\u0027s more work, but yes this API is completely tied up in the display within System UI. That behavior doesn\u0027t sound good enough to me, so I think if we want to support any millisecond value, we need to also adjust SystemUI to show what has been set more accurately. This is definitely something we can consider doing.\n\n\nHowever, if not, we should keep these constants and probably restrict the argument to only accept one of these (as an enum potentially).",
      "parentUuid": "bf659307_fe9ef952",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_9ec49d42",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 10394
      },
      "writtenOn": "2015-12-18T08:39:57Z",
      "side": 1,
      "message": "I agree with Matt - I think we should fix systemui since I can see scenarios where the user might want to pause until a specific time instead of being limited to these time chunks\n\nalso when i set it to 1 hour and then wait a few minutes, it updates properly for me",
      "parentUuid": "bf659307_bea88177",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_9ef25d9a",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 14451
      },
      "writtenOn": "2015-12-18T08:52:34Z",
      "side": 1,
      "message": "Ahhh okay. So then what do you guys think of the 2 phase solution: \n1. short-term to restrict the values to these just like the int zen_mode parameter. Except we will use \"long\", and will add to the API doc what values are allowed and in the future other values may be supported. \n\n2. Then after fixing the P1 we open another ticket for the system UI. I can see it needing some design. e.g. having the (very reasonable) suggested values. But then to allow freedom for other time chunks. e.g. it would be nice if maybe you could have a wheel control, that ticks to set times like w/ a bit of a spring, but that can also be stopped in between ticks. \n\nre: the updating properly -  i.e. it looks at the end-time and subtracts it from the current time, and will keep formatting the remainder duration correctly. But the initial duration is screwed up...",
      "parentUuid": "bf659307_9ec49d42",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_5e2a85e7",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 10394
      },
      "writtenOn": "2015-12-18T08:58:47Z",
      "side": 1,
      "message": "we should fix it now, but the systemui piece fix only needs to be fixed so that the accurate duration is shown if we go through this api",
      "parentUuid": "bf659307_9ef25d9a",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_9e47bdbd",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 63,
      "author": {
        "id": 9621
      },
      "writtenOn": "2015-12-18T09:01:47Z",
      "side": 1,
      "message": "I think I\u0027m agreeing with Linus here. To elaborate on what I mean: We should not change the UX for using system UI to change the mode. We should only fix System UI so that if we programmatically set it to any given millisecond time value, it should display correctly. The time should also display correctly if the user uses the normal SystemUI controls. So, we can do that right away and not have to do the restriction in step 1. We may do step 2 later but that is undefined, for the forseeable future we will only support setting these new times via the API.",
      "parentUuid": "bf659307_5e2a85e7",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_be1721ee",
        "filename": "src/java/cyanogenmod/app/PartnerInterface.java",
        "patchSetId": 2
      },
      "lineNbr": 261,
      "author": {
        "id": 14451
      },
      "writtenOn": "2015-12-18T07:26:11Z",
      "side": 1,
      "message": "Needs to be removed",
      "range": {
        "startLine": 261,
        "startChar": 14,
        "endLine": 261,
        "endChar": 28
      },
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "bf659307_5ed28536",
        "filename": "tests/src/org/cyanogenmod/tests/settings/CMPartnerInterfaceTest.java",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 14451
      },
      "writtenOn": "2015-12-18T07:26:11Z",
      "side": 1,
      "message": "Needs to be fixed",
      "revId": "c1eb3ca67d589bbe946446241a75bbb29f920aea",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71",
      "unresolved": false
    }
  ]
}